{"ast":null,"code":"var _jsxFileName = \"D:\\\\Rim\\\\react-app\\\\src\\\\App.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { ReactComponent as Check } from \"@svgr/webpack?-svgo,+titleProp,+ref!./svg/checked-mark.svg\";\nimport { Fragment, useCallback, useMemo, useReducer } from \"react\";\n/* import styled from \"styled-components\"; */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ENDPOINT = \"https://hn.algolia.com/api/v1/search?query=\"; //CSS\n\n/* const StlyedContainer = styled.div`\n  padding: 20px;\n  color: #171212;\n  background: #83a4d4;\n  background: linear-gradient(to left, #b6fbff, #83a4d4);\n`;\nconst StyledHeadlinePrimary = styled.h1`\n  text-align: center;\n  font-weight: 500;\n  font-size: 48px;\n  letter-spacing: 2px;\n`;\n\nconst StyledItem = styled.div`\n  padding-bottom: 20px;\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledColumn = styled.span`\n  padding: 0 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  a {\n    color: inherit;\n  }\n\n  width: ${(props) => props.width};\n`;\n\nconst StyledButton = styled.button`\n  padding: 5px;\n  border: 1px solid #171212;\n  cursor: pointer;\n  background: transparent;\n  transition: all 0.1s ease-in;\n\n  &:hover {\n    background: #171212;\n    color: #ffff;\n    svg {\n      g {\n        fill: #ffffff;\n        stroke: #ffffff;\n      }\n    }\n  }\n`;\n\nconst StyledButtonSmall = styled(StyledButton)`\n  padding: 5px;\n`;\n\nconst StyledButtonLarge = styled(StyledButton)`\n  padding: 10px;\n`;\n\nconst StyledSearchForm = styled.form`\n  padding: 10px 0 20px 0;\n  display: flex;\n  align-items: stretch;\n`;\n\nconst StyledLabel = styled.label`\n  border-top: 1px solid #171212;\n  border-left: 1px solid #171212;\n  font-size: 24px;\n  padding-left: 5px;\n`;\n\nconst StyledInput = styled.input`\n  width: 100%;\n  border: none;\n  border-bottom: 1px solid #171212;\n  background-color: transparent;\n  font-size: 24px;\n  margin-left: -5px;\n  padding-left: 5px;\n`; */\n//Custom Hook\n\nexport const usePersistentState = (key, initialState) => {\n  _s();\n\n  const [value, setValue] = useState(localStorage.getItem(key) || initialState);\n  const isMounted = useRef(false);\n  useEffect(() => {\n    if (!isMounted.current) {\n      isMounted.current = true;\n    } else {\n      console.log(\"A\");\n      localStorage.setItem(key, value);\n    }\n  }, [key, value]);\n  return [value, setValue];\n}; //Type\n\n_s(usePersistentState, \"O08EfRTMQFMYxvVhkINOVBH9cGE=\");\n\n//Stories reducer\nconst storiesReducer = (state, action) => {\n  switch (action.type) {\n    case \"STORIES_FETCH_INIT\":\n      return { ...state,\n        isLoading: true,\n        isError: false\n      };\n\n    case \"STORIES_FETCH_SUCCESS\":\n      return { ...state,\n        isLoading: false,\n        isError: false,\n        data: action.payload\n      };\n\n    case \"STORIES_FETCH_FAILURE\":\n      return { ...state,\n        isLoading: false,\n        isError: true\n      };\n\n    case \"REMOVE_STORY\":\n      return { ...state,\n        data: state.data.filter(story => story.objectID !== action.payload.objectID)\n      };\n\n    default:\n      throw new Error();\n  }\n};\n\nconst App = () => {\n  _s2();\n\n  const [stories, dispatchStories] = useReducer(storiesReducer, {\n    data: [],\n    isLoading: false,\n    isError: false\n  });\n  const [searchTerm, setSearchTerm] = usePersistentState(\"search\", \"React\");\n  const [url, setUrl] = useState(`${API_ENDPOINT}${searchTerm}`);\n  const handleFetchStories = useCallback(async () => {\n    dispatchStories({\n      type: \"STORIES_FETCH_INIT\"\n    });\n\n    try {\n      const respone = await axios.get(url);\n      dispatchStories({\n        type: \"STORIES_FETCH_SUCCESS\",\n        payload: respone.data.hits\n      });\n    } catch {\n      dispatchStories({\n        type: \"STORIES_FETCH_FAILURE\"\n      });\n    }\n  }, [url]);\n  useEffect(() => {\n    handleFetchStories();\n  }, [handleFetchStories]);\n  const handleRemoveStory = useCallback(item => {\n    dispatchStories({\n      type: \"REMOVE_STORY\",\n      payload: item\n    });\n  }, []);\n  const handleSearchInput = useCallback(e => setSearchTerm(e.target.value), [setSearchTerm]);\n  const handleSearchSubmit = useCallback(e => {\n    setUrl(`${API_ENDPOINT}${searchTerm}`);\n    e.preventDefault();\n  }, [searchTerm]);\n  console.log(\"B: App\");\n\n  const getSumComments = stories => {\n    console.log(\"C: SumComments\");\n    return stories.data.reduce((result, value) => result + value.num_comments, 0);\n  };\n\n  const sumComments = useMemo(() => getSumComments(stories), [stories]);\n  return /*#__PURE__*/_jsxDEV(StlyedContainer, {\n    children: [/*#__PURE__*/_jsxDEV(StyledHeadlinePrimary, {\n      children: [\"My Hacker Stories with \", sumComments, \" comments\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchForm, {\n      searchTerm: searchTerm,\n      onSearchSubmit: handleSearchSubmit,\n      onSearchInput: handleSearchInput\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), stories.isError && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Oops! Something went wrong...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }, this), stories.isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(List, {\n      list: stories.data,\n      onRemoveItem: handleRemoveStory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(App, \"KTva93/hNQjk/pKEvS/4ejtI5lk=\", false, function () {\n  return [usePersistentState];\n});\n\n_c = App;\nexport default App;\nexport const SearchForm = /*#__PURE__*/React.memo(_c2 = ({\n  onSearchSubmit,\n  onSearchInput,\n  searchTerm\n}) => /*#__PURE__*/_jsxDEV(StyledSearchForm, {\n  onSubmit: onSearchSubmit,\n  children: [/*#__PURE__*/_jsxDEV(InputWithLabel, {\n    onInputChange: onSearchInput,\n    value: searchTerm,\n    id: \"search\",\n    label: \"Search\",\n    isFocused: true,\n    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"Search for:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(StyledButtonLarge, {\n    type: \"submit\",\n    disabled: !searchTerm,\n    children: \"Submit\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 310,\n  columnNumber: 5\n}, this));\n_c3 = SearchForm;\nexport const InputWithLabel = ({\n  isFocused,\n  children,\n  type = \"text\",\n  id,\n  value,\n  onInputChange,\n  checked\n}) => {\n  _s3();\n\n  const inputRef = useRef(null);\n  useEffect(() => {\n    if (isFocused && inputRef.current) {\n      inputRef.current.focus();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(StyledLabel, {\n      htmlFor: id,\n      children: [children, \"\\xA0\", /*#__PURE__*/_jsxDEV(StyledInput, {\n        id: id,\n        type: type,\n        value: value,\n        onChange: onInputChange,\n        ref: inputRef,\n        checked: checked\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(InputWithLabel, \"cBQ6FQ+sf5H+lvNONLKqtm4aeQ8=\");\n\n_c4 = InputWithLabel;\nexport const List = /*#__PURE__*/React.memo(_c5 = ({\n  list,\n  onRemoveItem\n}) => /*#__PURE__*/_jsxDEV(\"ul\", {\n  children: list.map(item => /*#__PURE__*/_jsxDEV(Item, {\n    item: item,\n    onRemoveItem: onRemoveItem\n  }, item.objectID, false, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 9\n  }, this))\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 365,\n  columnNumber: 5\n}, this));\n_c6 = List;\nexport const Item = /*#__PURE__*/React.memo(_c7 = ({\n  item,\n  onRemoveItem\n}) => /*#__PURE__*/_jsxDEV(StyledItem, {\n  children: [/*#__PURE__*/_jsxDEV(StyledColumn, {\n    width: \"40%\",\n    children: /*#__PURE__*/_jsxDEV(\"a\", {\n      href: item.url,\n      children: [item.title, \": \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(StyledColumn, {\n    width: \"20%\",\n    children: [item.author, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(StyledColumn, {\n    width: \"20%\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Comments: \", item.num_comments]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 383,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(StyledColumn, {\n    width: \"10%\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Points: \", item.points]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 386,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(StyledColumn, {\n    width: \"10%\",\n    children: /*#__PURE__*/_jsxDEV(StyledButtonSmall, {\n      type: \"button\",\n      onClick: () => onRemoveItem(item),\n      children: /*#__PURE__*/_jsxDEV(Check, {\n        height: \"10px\",\n        width: \"10px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 390,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 378,\n  columnNumber: 5\n}, this));\n_c8 = Item;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"SearchForm$React.memo\");\n$RefreshReg$(_c3, \"SearchForm\");\n$RefreshReg$(_c4, \"InputWithLabel\");\n$RefreshReg$(_c5, \"List$React.memo\");\n$RefreshReg$(_c6, \"List\");\n$RefreshReg$(_c7, \"Item$React.memo\");\n$RefreshReg$(_c8, \"Item\");","map":{"version":3,"sources":["D:/Rim/react-app/src/App.tsx"],"names":["axios","React","useEffect","useState","useRef","Fragment","useCallback","useMemo","useReducer","API_ENDPOINT","usePersistentState","key","initialState","value","setValue","localStorage","getItem","isMounted","current","console","log","setItem","storiesReducer","state","action","type","isLoading","isError","data","payload","filter","story","objectID","Error","App","stories","dispatchStories","searchTerm","setSearchTerm","url","setUrl","handleFetchStories","respone","get","hits","handleRemoveStory","item","handleSearchInput","e","target","handleSearchSubmit","preventDefault","getSumComments","reduce","result","num_comments","sumComments","SearchForm","memo","onSearchSubmit","onSearchInput","InputWithLabel","isFocused","children","id","onInputChange","checked","inputRef","focus","List","list","onRemoveItem","map","Item","title","author","points"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C;;AAEA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,OAAhC,EAAyCC,UAAzC,QAA2D,OAA3D;AACA;;;AACA,MAAMC,YAAY,GAAG,6CAArB,C,CAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,OAAO,MAAMC,kBAAkB,GAAG,CAACC,GAAD,EAAcC,YAAd,KAA6E;AAAA;;AAC7G,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAACY,YAAY,CAACC,OAAb,CAAqBL,GAArB,KAA6BC,YAA9B,CAAlC;AACA,QAAMK,SAAS,GAAGb,MAAM,CAAC,KAAD,CAAxB;AACAF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACe,SAAS,CAACC,OAAf,EAAwB;AACtBD,MAAAA,SAAS,CAACC,OAAV,GAAoB,IAApB;AACD,KAFD,MAEO;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAL,MAAAA,YAAY,CAACM,OAAb,CAAqBV,GAArB,EAA0BE,KAA1B;AACD;AACF,GAPQ,EAON,CAACF,GAAD,EAAME,KAAN,CAPM,CAAT;AASA,SAAO,CAACA,KAAD,EAAQC,QAAR,CAAP;AACD,CAbM,C,CAeP;;GAfaJ,kB;;AA6Eb;AACA,MAAMY,cAAc,GAAG,CAACC,KAAD,EAAsBC,MAAtB,KAAgD;AACrE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,oBAAL;AACE,aAAO,EACL,GAAGF,KADE;AAELG,QAAAA,SAAS,EAAE,IAFN;AAGLC,QAAAA,OAAO,EAAE;AAHJ,OAAP;;AAKF,SAAK,uBAAL;AACE,aAAO,EACL,GAAGJ,KADE;AAELG,QAAAA,SAAS,EAAE,KAFN;AAGLC,QAAAA,OAAO,EAAE,KAHJ;AAILC,QAAAA,IAAI,EAAEJ,MAAM,CAACK;AAJR,OAAP;;AAMF,SAAK,uBAAL;AACE,aAAO,EACL,GAAGN,KADE;AAELG,QAAAA,SAAS,EAAE,KAFN;AAGLC,QAAAA,OAAO,EAAE;AAHJ,OAAP;;AAKF,SAAK,cAAL;AACE,aAAO,EACL,GAAGJ,KADE;AAELK,QAAAA,IAAI,EAAEL,KAAK,CAACK,IAAN,CAAWE,MAAX,CACHC,KAAD,IAAWA,KAAK,CAACC,QAAN,KAAmBR,MAAM,CAACK,OAAP,CAAeG,QADzC;AAFD,OAAP;;AAMF;AACE,YAAM,IAAIC,KAAJ,EAAN;AA5BJ;AA8BD,CA/BD;;AAoCA,MAAMC,GAAG,GAAG,MAAM;AAAA;;AAChB,QAAM,CAACC,OAAD,EAAUC,eAAV,IAA6B5B,UAAU,CAACc,cAAD,EAAiB;AAC5DM,IAAAA,IAAI,EAAE,EADsD;AAE5DF,IAAAA,SAAS,EAAE,KAFiD;AAG5DC,IAAAA,OAAO,EAAE;AAHmD,GAAjB,CAA7C;AAKA,QAAM,CAACU,UAAD,EAAaC,aAAb,IAA8B5B,kBAAkB,CAAC,QAAD,EAAW,OAAX,CAAtD;AAGA,QAAM,CAAC6B,GAAD,EAAMC,MAAN,IAAgBrC,QAAQ,CAAE,GAAEM,YAAa,GAAE4B,UAAW,EAA9B,CAA9B;AAEA,QAAMI,kBAAkB,GAAGnC,WAAW,CAAC,YAAY;AACjD8B,IAAAA,eAAe,CAAC;AACdX,MAAAA,IAAI,EAAE;AADQ,KAAD,CAAf;;AAIA,QAAI;AACF,YAAMiB,OAAO,GAAG,MAAM1C,KAAK,CAAC2C,GAAN,CAAUJ,GAAV,CAAtB;AACAH,MAAAA,eAAe,CAAC;AACdX,QAAAA,IAAI,EAAE,uBADQ;AAEdI,QAAAA,OAAO,EAAEa,OAAO,CAACd,IAAR,CAAagB;AAFR,OAAD,CAAf;AAID,KAND,CAME,MAAM;AACNR,MAAAA,eAAe,CAAC;AACdX,QAAAA,IAAI,EAAE;AADQ,OAAD,CAAf;AAGD;AACF,GAhBqC,EAgBnC,CAACc,GAAD,CAhBmC,CAAtC;AAkBArC,EAAAA,SAAS,CAAC,MAAM;AACduC,IAAAA,kBAAkB;AACnB,GAFQ,EAEN,CAACA,kBAAD,CAFM,CAAT;AAIA,QAAMI,iBAAiB,GAAGvC,WAAW,CAAEwC,IAAD,IAAiB;AACrDV,IAAAA,eAAe,CAAC;AACdX,MAAAA,IAAI,EAAE,cADQ;AAEdI,MAAAA,OAAO,EAAEiB;AAFK,KAAD,CAAf;AAID,GALoC,EAKlC,EALkC,CAArC;AAOA,QAAMC,iBAAiB,GAAGzC,WAAW,CAClC0C,CAAD,IAA4CV,aAAa,CAACU,CAAC,CAACC,MAAF,CAASpC,KAAV,CADtB,EAEnC,CAACyB,aAAD,CAFmC,CAArC;AAKA,QAAMY,kBAAkB,GAAG5C,WAAW,CACnC0C,CAAD,IAAyC;AACvCR,IAAAA,MAAM,CAAE,GAAE/B,YAAa,GAAE4B,UAAW,EAA9B,CAAN;AACAW,IAAAA,CAAC,CAACG,cAAF;AACD,GAJmC,EAKpC,CAACd,UAAD,CALoC,CAAtC;AAQAlB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AAEA,QAAMgC,cAAc,GAAIjB,OAAD,IAAa;AAClChB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAOe,OAAO,CAACP,IAAR,CAAayB,MAAb,CACL,CAACC,MAAD,EAASzC,KAAT,KAAmByC,MAAM,GAAGzC,KAAK,CAAC0C,YAD7B,EAEL,CAFK,CAAP;AAID,GAND;;AAQA,QAAMC,WAAW,GAAGjD,OAAO,CAAC,MAAM6C,cAAc,CAACjB,OAAD,CAArB,EAAgC,CAACA,OAAD,CAAhC,CAA3B;AAEA,sBACE,QAAC,eAAD;AAAA,4BAGE,QAAC,qBAAD;AAAA,4CAC0BqB,WAD1B;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF,eAOE,QAAC,UAAD;AACE,MAAA,UAAU,EAAEnB,UADd;AAEE,MAAA,cAAc,EAAEa,kBAFlB;AAGE,MAAA,aAAa,EAAEH;AAHjB;AAAA;AAAA;AAAA;AAAA,YAPF,EAaGZ,OAAO,CAACR,OAAR,iBACC;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAdJ,EAmBGQ,OAAO,CAACT,SAAR,gBACC;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADD,gBAKC,QAAC,IAAD;AAAM,MAAA,IAAI,EAAES,OAAO,CAACP,IAApB;AAA0B,MAAA,YAAY,EAAEiB;AAAxC;AAAA;AAAA;AAAA;AAAA,YAxBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA6BD,CA9FD;;IAAMX,G;UAMgCxB,kB;;;KANhCwB,G;AAgGN,eAAeA,GAAf;AAEA,OAAO,MAAMuB,UAAU,gBAAGxD,KAAK,CAACyD,IAAN,OACxB,CAAC;AAAEC,EAAAA,cAAF;AAAkBC,EAAAA,aAAlB;AAAiCvB,EAAAA;AAAjC,CAAD,kBAEE,QAAC,gBAAD;AAAkB,EAAA,QAAQ,EAAEsB,cAA5B;AAAA,0BACE,QAAC,cAAD;AACE,IAAA,aAAa,EAAEC,aADjB;AAEE,IAAA,KAAK,EAAEvB,UAFT;AAGE,IAAA,EAAE,EAAC,QAHL;AAIE,IAAA,KAAK,EAAC,QAJR;AAKE,IAAA,SAAS,EAAE,IALb;AAAA,2BAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,UADF,eAUE,QAAC,iBAAD;AAAmB,IAAA,IAAI,EAAC,QAAxB;AAAiC,IAAA,QAAQ,EAAE,CAACA,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAVF;AAAA;AAAA;AAAA;AAAA;AAAA,QAHsB,CAAnB;MAAMoB,U;AAoBb,OAAO,MAAMI,cAAc,GAAG,CAAC;AAC7BC,EAAAA,SAD6B;AAE7BC,EAAAA,QAF6B;AAG7BtC,EAAAA,IAAI,GAAG,MAHsB;AAI7BuC,EAAAA,EAJ6B;AAK7BnD,EAAAA,KAL6B;AAM7BoD,EAAAA,aAN6B;AAO7BC,EAAAA;AAP6B,CAAD,KAQH;AAAA;;AACzB,QAAMC,QAAQ,GAAG/D,MAAM,CAAmB,IAAnB,CAAvB;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI4D,SAAS,IAAIK,QAAQ,CAACjD,OAA1B,EAAmC;AACjCiD,MAAAA,QAAQ,CAACjD,OAAT,CAAiBkD,KAAjB;AACD;AACF,GAJQ,CAAT;AAMA,sBACE,QAAC,QAAD;AAAA,2BACE,QAAC,WAAD;AAAa,MAAA,OAAO,EAAEJ,EAAtB;AAAA,iBACGD,QADH,uBAGE,QAAC,WAAD;AACE,QAAA,EAAE,EAAEC,EADN;AAEE,QAAA,IAAI,EAAEvC,IAFR;AAGE,QAAA,KAAK,EAAEZ,KAHT;AAIE,QAAA,QAAQ,EAAEoD,aAJZ;AAKE,QAAA,GAAG,EAAEE,QALP;AAME,QAAA,OAAO,EAAED;AANX;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAgBD,CAjCM;;IAAML,c;;MAAAA,c;AAmCb,OAAO,MAAMQ,IAAI,gBAAGpE,KAAK,CAACyD,IAAN,OAClB,CAAC;AAAEY,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,kBAEE;AAAA,YACGD,IAAI,CAACE,GAAL,CAAU1B,IAAD,iBACR,QAAC,IAAD;AAA0B,IAAA,IAAI,EAAEA,IAAhC;AAAsC,IAAA,YAAY,EAAEyB;AAApD,KAAWzB,IAAI,CAACd,QAAhB;AAAA;AAAA;AAAA;AAAA,UADD;AADH;AAAA;AAAA;AAAA;AAAA,QAHgB,CAAb;MAAMqC,I;AAab,OAAO,MAAMI,IAAI,gBAAGxE,KAAK,CAACyD,IAAN,OAClB,CAAC;AAAEZ,EAAAA,IAAF;AAAQyB,EAAAA;AAAR,CAAD,kBAEE,QAAC,UAAD;AAAA,0BACE,QAAC,YAAD;AAAc,IAAA,KAAK,EAAC,KAApB;AAAA,2BACE;AAAG,MAAA,IAAI,EAAEzB,IAAI,CAACP,GAAd;AAAA,iBAAoBO,IAAI,CAAC4B,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF,eAIE,QAAC,YAAD;AAAc,IAAA,KAAK,EAAC,KAApB;AAAA,eAA2B5B,IAAI,CAAC6B,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF,eAKE,QAAC,YAAD;AAAc,IAAA,KAAK,EAAC,KAApB;AAAA,2BACE;AAAA,+BAAc7B,IAAI,CAACS,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UALF,eAQE,QAAC,YAAD;AAAc,IAAA,KAAK,EAAC,KAApB;AAAA,2BACE;AAAA,6BAAYT,IAAI,CAAC8B,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UARF,eAYE,QAAC,YAAD;AAAc,IAAA,KAAK,EAAC,KAApB;AAAA,2BACE,QAAC,iBAAD;AAAmB,MAAA,IAAI,EAAC,QAAxB;AAAiC,MAAA,OAAO,EAAE,MAAML,YAAY,CAACzB,IAAD,CAA5D;AAAA,6BACE,QAAC,KAAD;AAAO,QAAA,MAAM,EAAC,MAAd;AAAqB,QAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UAZF;AAAA;AAAA;AAAA;AAAA;AAAA,QAHgB,CAAb;MAAM2B,I","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { ReactComponent as Check } from \"./svg/checked-mark.svg\";\nimport { Fragment, useCallback, useMemo, useReducer } from \"react\";\n/* import styled from \"styled-components\"; */\nconst API_ENDPOINT = \"https://hn.algolia.com/api/v1/search?query=\";\n\n \n//CSS\n\n/* const StlyedContainer = styled.div`\n  padding: 20px;\n  color: #171212;\n  background: #83a4d4;\n  background: linear-gradient(to left, #b6fbff, #83a4d4);\n`;\nconst StyledHeadlinePrimary = styled.h1`\n  text-align: center;\n  font-weight: 500;\n  font-size: 48px;\n  letter-spacing: 2px;\n`;\n\nconst StyledItem = styled.div`\n  padding-bottom: 20px;\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledColumn = styled.span`\n  padding: 0 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  a {\n    color: inherit;\n  }\n\n  width: ${(props) => props.width};\n`;\n\nconst StyledButton = styled.button`\n  padding: 5px;\n  border: 1px solid #171212;\n  cursor: pointer;\n  background: transparent;\n  transition: all 0.1s ease-in;\n\n  &:hover {\n    background: #171212;\n    color: #ffff;\n    svg {\n      g {\n        fill: #ffffff;\n        stroke: #ffffff;\n      }\n    }\n  }\n`;\n\nconst StyledButtonSmall = styled(StyledButton)`\n  padding: 5px;\n`;\n\nconst StyledButtonLarge = styled(StyledButton)`\n  padding: 10px;\n`;\n\nconst StyledSearchForm = styled.form`\n  padding: 10px 0 20px 0;\n  display: flex;\n  align-items: stretch;\n`;\n\nconst StyledLabel = styled.label`\n  border-top: 1px solid #171212;\n  border-left: 1px solid #171212;\n  font-size: 24px;\n  padding-left: 5px;\n`;\n\nconst StyledInput = styled.input`\n  width: 100%;\n  border: none;\n  border-bottom: 1px solid #171212;\n  background-color: transparent;\n  font-size: 24px;\n  margin-left: -5px;\n  padding-left: 5px;\n`; */\n\n//Custom Hook\nexport const usePersistentState = (key: string, initialState: string): [string, (newValue: string) => void] => {\n  const [value, setValue] = useState(localStorage.getItem(key) || initialState);\n  const isMounted = useRef(false);\n  useEffect(() => {\n    if (!isMounted.current) {\n      isMounted.current = true;\n    } else {\n      console.log(\"A\");\n      localStorage.setItem(key, value);\n    }\n  }, [key, value]);\n\n  return [value, setValue];\n};\n\n//Type\ntype Story = {\n  objectID: string;\n  url: string;\n  title: string;\n  author: string;\n  num_comments: number;\n  points: number;\n};\n\ntype ItemProps = { item: Story; onRemoveItem: (item: Story) => void };\ntype Stories = Array<Story>;\ntype ListProps = {\n  list: Stories;\n  onRemoveItem: (item: Story) => void;\n};\ntype SearchFormProps = {\n  searchTerm: string;\n  onSearchInput: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onSearchSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n};\ntype InputWithLabelProps = {\n  isFocused?: boolean;\n  children: React.ReactNode;\n  type?: string;\n  id: string;\n  value: string;\n  onInputChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  checked?: boolean;\n}\n\n\n\ntype StoriesState = {\n  data: Stories;\n  isLoading: boolean;\n  isError: boolean;\n};\n\n\n\ninterface StoriesFetchInitAction {\n  type: 'STORIES_FETCH_INIT';\n}\ninterface StoriesFetchSuccessAction {\n  type: 'STORIES_FETCH_SUCCESS';\n  payload: Stories;\n}\ninterface StoriesFetchFailureAction {\n  type: 'STORIES_FETCH_FAILURE';\n}\ninterface StoriesRemoveAction {\n  type: 'REMOVE_STORY';\n  payload: Story;\n}\n\ntype StoriesAction =\n  | StoriesFetchInitAction\n  | StoriesFetchSuccessAction\n  | StoriesFetchFailureAction\n  | StoriesRemoveAction;\n\n//Stories reducer\nconst storiesReducer = (state: StoriesState, action: StoriesAction) => {\n  switch (action.type) {\n    case \"STORIES_FETCH_INIT\":\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      };\n    case \"STORIES_FETCH_SUCCESS\":\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        data: action.payload,\n      };\n    case \"STORIES_FETCH_FAILURE\":\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case \"REMOVE_STORY\":\n      return {\n        ...state,\n        data: state.data.filter(\n          (story) => story.objectID !== action.payload.objectID\n        ),\n      };\n    default:\n      throw new Error();\n  }\n}\n\n\n\n\nconst App = () => {\n  const [stories, dispatchStories] = useReducer(storiesReducer, {\n    data: [],\n    isLoading: false,\n    isError: false,\n  });\n  const [searchTerm, setSearchTerm] = usePersistentState(\"search\", \"React\");\n  \n  \n  const [url, setUrl] = useState(`${API_ENDPOINT}${searchTerm}`);\n\n  const handleFetchStories = useCallback(async () => {\n    dispatchStories({\n      type: \"STORIES_FETCH_INIT\",\n    });\n\n    try {\n      const respone = await axios.get(url);\n      dispatchStories({\n        type: \"STORIES_FETCH_SUCCESS\",\n        payload: respone.data.hits,\n      });\n    } catch {\n      dispatchStories({\n        type: \"STORIES_FETCH_FAILURE\",\n      });\n    }\n  }, [url]);\n\n  useEffect(() => {\n    handleFetchStories();\n  }, [handleFetchStories]);\n\n  const handleRemoveStory = useCallback((item: Story) => {\n    dispatchStories({\n      type: \"REMOVE_STORY\",\n      payload: item,\n    });\n  }, []);\n\n  const handleSearchInput = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => setSearchTerm(e.target.value),\n    [setSearchTerm]\n  );\n\n  const handleSearchSubmit = useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      setUrl(`${API_ENDPOINT}${searchTerm}`);\n      e.preventDefault();\n    },\n    [searchTerm]\n  );\n\n  console.log(\"B: App\");\n\n  const getSumComments = (stories) => {\n    console.log(\"C: SumComments\");\n    return stories.data.reduce(\n      (result, value) => result + value.num_comments,\n      0\n    );\n  };\n\n  const sumComments = useMemo(() => getSumComments(stories), [stories]);\n\n  return (\n    <StlyedContainer>\n\n\n      <StyledHeadlinePrimary>\n        My Hacker Stories with {sumComments} comments\n      </StyledHeadlinePrimary>\n\n      <SearchForm\n        searchTerm={searchTerm}\n        onSearchSubmit={handleSearchSubmit}\n        onSearchInput={handleSearchInput}\n      />\n\n      {stories.isError && (\n        <p>\n          <strong>Oops! Something went wrong...</strong>\n        </p>\n      )}\n\n      {stories.isLoading ? (\n        <p>\n          <strong>Loading...</strong>\n        </p>\n      ) : (\n        <List list={stories.data} onRemoveItem={handleRemoveStory} />\n      )}\n    </StlyedContainer>\n  );\n};\n\nexport default App;\n\nexport const SearchForm = React.memo(\n  ({ onSearchSubmit, onSearchInput, searchTerm }: SearchFormProps) =>\n  (\n    <StyledSearchForm onSubmit={onSearchSubmit}>\n      <InputWithLabel\n        onInputChange={onSearchInput}\n        value={searchTerm}\n        id=\"search\"\n        label=\"Search\"\n        isFocused={true}\n      >\n        <strong>Search for:</strong>\n      </InputWithLabel>\n      <StyledButtonLarge type=\"submit\" disabled={!searchTerm}>\n        Submit\n      </StyledButtonLarge>\n    </StyledSearchForm>\n  )\n);\n\nexport const InputWithLabel = ({\n  isFocused,\n  children,\n  type = \"text\",\n  id,\n  value,\n  onInputChange,\n  checked,\n}: InputWithLabelProps) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (isFocused && inputRef.current) {\n      inputRef.current.focus();\n    }\n  });\n\n  return (\n    <Fragment>\n      <StyledLabel htmlFor={id}>\n        {children}\n        &nbsp;\n        <StyledInput\n          id={id}\n          type={type}\n          value={value}\n          onChange={onInputChange}\n          ref={inputRef}\n          checked={checked}\n        ></StyledInput>\n      </StyledLabel>\n    </Fragment>\n  );\n};\n\nexport const List = React.memo(\n  ({ list, onRemoveItem }: ListProps) =>\n  (\n    <ul>\n      {list.map((item) => (\n        <Item key={item.objectID} item={item} onRemoveItem={onRemoveItem} />\n      ))}\n    </ul>\n  )\n);\n\n\n\nexport const Item = React.memo(\n  ({ item, onRemoveItem }: ItemProps) =>\n  (\n    <StyledItem>\n      <StyledColumn width=\"40%\">\n        <a href={item.url}>{item.title}: </a>\n      </StyledColumn>\n      <StyledColumn width=\"20%\">{item.author} </StyledColumn>\n      <StyledColumn width=\"20%\">\n        <p>Comments: {item.num_comments}</p>\n      </StyledColumn>\n      <StyledColumn width=\"10%\">\n        <p>Points: {item.points}</p>\n      </StyledColumn>\n\n      <StyledColumn width=\"10%\">\n        <StyledButtonSmall type=\"button\" onClick={() => onRemoveItem(item)}>\n          <Check height=\"10px\" width=\"10px\" />\n        </StyledButtonSmall>\n      </StyledColumn>\n    </StyledItem>\n  )\n);\n"]},"metadata":{},"sourceType":"module"}