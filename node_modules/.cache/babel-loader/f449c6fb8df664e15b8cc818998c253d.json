{"ast":null,"code":"var _jsxFileName = \"D:\\\\Rim\\\\react-app\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport { useCallback, useMemo, useReducer, useEffect, useState } from \"react\";\nimport * as SC from \"./style\";\n/* import TodoApp from \"./TodoApp\"; */\n\nimport { SearchForm } from \"./SearchForm\";\nimport { List } from \"./List\";\nimport { LastSearches } from \"./LastSearches\";\nimport { usePersistentState } from \"./hooks/Custom Hook\";\nimport storiesReducer from './reducers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ENDPOINT = \"https://hn.algolia.com/api/v1/search?query=\";\n\nconst getUrl = searchTerm => `${API_ENDPOINT}${searchTerm}`;\n\nconst App = () => {\n  _s();\n\n  const [stories, dispatchStories] = useReducer(storiesReducer, {\n    data: [],\n    isLoading: false,\n    isError: false\n  });\n  const [searchTerm, setSearchTerm] = usePersistentState(\"search\", \"React\");\n  const [urls, setUrls] = useState([getUrl(searchTerm)]);\n\n  const extractSearchTerm = url => url.replace(API_ENDPOINT, \"\");\n\n  const getLastSearches = urls => urls.reduce((result, url, index) => {\n    const searchTerm = extractSearchTerm(url);\n\n    if (index === 0) {\n      return result.concat(searchTerm);\n    }\n\n    const previousSearchTerm = result[result.length - 1];\n\n    if (previousSearchTerm === searchTerm) {\n      return result;\n    } else {\n      return result.concat(searchTerm);\n    }\n  }, []).slice(-6).slice(0, -1);\n\n  const lastSearchs = getLastSearches(urls);\n  const handleFetchStories = useCallback(async () => {\n    dispatchStories({\n      type: \"STORIES_FETCH_INIT\"\n    });\n\n    try {\n      const lastUrl = urls[urls.length - 1];\n      const respone = await axios.get(lastUrl);\n      dispatchStories({\n        type: \"STORIES_FETCH_SUCCESS\",\n        payload: respone.data.hits\n      });\n    } catch {\n      dispatchStories({\n        type: \"STORIES_FETCH_FAILURE\"\n      });\n    }\n  }, [urls]);\n  useEffect(() => {\n    handleFetchStories();\n  }, [handleFetchStories]);\n  const handleRemoveStory = useCallback(item => {\n    dispatchStories({\n      type: \"REMOVE_STORY\",\n      payload: item\n    });\n  }, []);\n  const handleSearchInput = useCallback(e => setSearchTerm(e.target.value), [setSearchTerm]);\n\n  const handleSearchSubmit = e => {\n    handleSearch(searchTerm);\n    e.preventDefault();\n  };\n\n  const handleLastSearch = searchTerm => {\n    handleSearch(searchTerm);\n    setSearchTerm(searchTerm);\n  };\n\n  const handleSearch = useCallback(searchTerm => {\n    const url = getUrl(searchTerm);\n    setUrls(urls.concat(url));\n  }, [urls]);\n\n  const getSumComments = stories => {\n    return stories.data.reduce((result, value) => result + value.num_comments, 0);\n  };\n\n  const sumComments = useMemo(() => getSumComments(stories), [stories]);\n  return /*#__PURE__*/_jsxDEV(SC.StyledContainer, {\n    children: [/*#__PURE__*/_jsxDEV(SC.StyledHeadlinePrimary, {\n      children: [\"My Hacker Stories with \", sumComments, \" comments\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchForm, {\n      searchTerm: searchTerm,\n      onSearchSubmit: handleSearchSubmit,\n      onSearchInput: handleSearchInput\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LastSearches, {\n      lastSearchs: lastSearchs,\n      onLastSearch: handleLastSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), stories.isError && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Oops! Something went wrong...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this), stories.isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(List, {\n      list: stories.data,\n      onRemoveItem: handleRemoveStory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"CI1PII12/5CgaYb8rigg0fKubJw=\", false, function () {\n  return [usePersistentState];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Rim/react-app/src/components/App.js"],"names":["React","axios","useCallback","useMemo","useReducer","useEffect","useState","SC","SearchForm","List","LastSearches","usePersistentState","storiesReducer","API_ENDPOINT","getUrl","searchTerm","App","stories","dispatchStories","data","isLoading","isError","setSearchTerm","urls","setUrls","extractSearchTerm","url","replace","getLastSearches","reduce","result","index","concat","previousSearchTerm","length","slice","lastSearchs","handleFetchStories","type","lastUrl","respone","get","payload","hits","handleRemoveStory","item","handleSearchInput","e","target","value","handleSearchSubmit","handleSearch","preventDefault","handleLastSearch","getSumComments","num_comments","sumComments"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport {\n  useCallback,\n  useMemo,\n  useReducer,\n  useEffect,\n  useState,\n} from \"react\";\nimport * as SC from \"./style\";\n/* import TodoApp from \"./TodoApp\"; */\nimport { SearchForm } from \"./SearchForm\";\nimport { List } from \"./List\";\nimport { LastSearches } from \"./LastSearches\";\nimport { usePersistentState } from \"./hooks/Custom Hook\";\nimport storiesReducer from './reducers'\n\nconst API_ENDPOINT = \"https://hn.algolia.com/api/v1/search?query=\";\nconst getUrl = (searchTerm) => `${API_ENDPOINT}${searchTerm}`;\n\nconst App = () => {\n  const [stories, dispatchStories] = useReducer(storiesReducer, {\n    data: [],\n    isLoading: false,\n    isError: false,\n  });\n  const [searchTerm, setSearchTerm] = usePersistentState(\"search\", \"React\");\n  const [urls, setUrls] = useState([getUrl(searchTerm)]);\n  const extractSearchTerm = (url) => url.replace(API_ENDPOINT, \"\");\n  const getLastSearches = (urls) =>\n    urls\n      .reduce((result, url, index) => {\n        const searchTerm = extractSearchTerm(url);\n        if (index === 0) {\n          return result.concat(searchTerm);\n        }\n        const previousSearchTerm = result[result.length - 1];\n        if (previousSearchTerm === searchTerm) {\n          return result;\n        } else {\n          return result.concat(searchTerm);\n        }\n      }, [])\n      .slice(-6)\n      .slice(0, -1);\n\n  const lastSearchs = getLastSearches(urls);\n\n  const handleFetchStories = useCallback(async () => {\n    dispatchStories({\n      type: \"STORIES_FETCH_INIT\",\n    });\n\n    try {\n      const lastUrl = urls[urls.length - 1];\n      const respone = await axios.get(lastUrl);\n      dispatchStories({\n        type: \"STORIES_FETCH_SUCCESS\",\n        payload: respone.data.hits,\n      });\n    } catch {\n      dispatchStories({\n        type: \"STORIES_FETCH_FAILURE\",\n      });\n    }\n  }, [urls]);\n\n  useEffect(() => {\n    handleFetchStories();\n  }, [handleFetchStories]);\n\n  const handleRemoveStory = useCallback((item) => {\n    dispatchStories({\n      type: \"REMOVE_STORY\",\n      payload: item,\n    });\n  }, []);\n\n  const handleSearchInput = useCallback(\n    (e) => setSearchTerm(e.target.value),\n    [setSearchTerm]\n  );\n\n  const handleSearchSubmit = (e) => {\n    handleSearch(searchTerm);\n    e.preventDefault();\n  };\n\n  const handleLastSearch = (searchTerm) => {\n    handleSearch(searchTerm);\n    setSearchTerm(searchTerm);\n  };\n\n  const handleSearch = useCallback(\n    (searchTerm) => {\n      const url = getUrl(searchTerm);\n      setUrls(urls.concat(url));\n    },\n    [urls]\n  );\n\n  const getSumComments = (stories) => {\n    return stories.data.reduce(\n      (result, value) => result + value.num_comments,\n      0\n    );\n  };\n\n  const sumComments = useMemo(() => getSumComments(stories), [stories]);\n\n  return (\n    <SC.StyledContainer>\n      {/*  <TodoApp /> */}\n\n      <SC.StyledHeadlinePrimary>\n        My Hacker Stories with {sumComments} comments\n      </SC.StyledHeadlinePrimary>\n\n      <SearchForm\n        searchTerm={searchTerm}\n        onSearchSubmit={handleSearchSubmit}\n        onSearchInput={handleSearchInput}\n      />\n\n      <LastSearches lastSearchs={lastSearchs} onLastSearch={handleLastSearch} />\n\n      {stories.isError && (\n        <p>\n          <strong>Oops! Something went wrong...</strong>\n        </p>\n      )}\n\n      {stories.isLoading ? (\n        <p>\n          <strong>Loading...</strong>\n        </p>\n      ) : (\n        <List list={stories.data} onRemoveItem={handleRemoveStory} />\n      )}\n    </SC.StyledContainer>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}